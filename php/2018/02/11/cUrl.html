<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="http://localhost:4000/assets/fonts/fonts.css"/>
<link rel="stylesheet" href="http://localhost:4000/assets/style.css"/>
<link rel="stylesheet" href="http://localhost:4000/assets/js/lity.min.css"/>



<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta property="og:site_name" content="MINGHU6's Blog" />
<meta 
    property="og:title"
    content="
        
            cUrl
        
    " 
/>

<meta property="og:url" content="http://localhost:4000//php/2018/02/11/cUrl.html" />

    <meta property="og:type" content="article" />



    <meta property="fb:app_id" content="" />



<title>
    
        cUrl
    
</title>
</head>
<body class="index">

    <header class="header">
    <section class="logo">
        <a href="http://localhost:4000/" class="logo__link">
            
                <h1 style="display: none;">MINGHU6's Blog</h1>
                <img class="logo__link__img" src="/minghu6.jpeg" />
            
        </a>
    </section>
    <button id="menuToggle">
        <div></div>
        <div></div>
        <div></div>
    </button>
    <nav class="menu">
        
<ul class="list primary">

    
</ul>
    </nav>
</header>

    <article class="post">

    <div class="post__title">
        <h1 class="post__title__text">cUrl</h1>
    </div>
    <div class="post__meta"> 
        <div class="post__meta__category">
            
                <p class="post__meta__category__title" style="background: "></p>
            
        </div>
        <p class="post__meta__divider">·</p>
        <div class="post__meta__date">
            February 11, 2018
        </div>
        
    </div>

    

    <div class="post__content">
        <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$cURL</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// set url</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$cURL</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>

<span class="c1">// set method default is GET</span>
<span class="c1">// curl_setopt($cURL, CURLOPT_CUSTOMREQUEST, "POST");</span>

<span class="c1">// set header</span>
<span class="nv">$deviceId</span> <span class="o">=</span> <span class="s1">'1234567890'</span><span class="p">;</span>  <span class="c1">// custom header field</span>
<span class="nv">$appVersion</span> <span class="o">=</span> <span class="s1">'1.0.0'</span><span class="p">;</span>  <span class="c1">// custom header field</span>

<span class="nv">$header</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="c1">// 'Content-Length: ' . strlen($data_string)  // optional</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'version: '</span><span class="mf">.</span><span class="nv">$appVersion</span><span class="p">,</span>
    <span class="s1">'deviceId: '</span><span class="mf">.</span><span class="nv">$deviceId</span>
<span class="p">)</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$cURL</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$header</span><span class="p">);</span>

<span class="c1">// set json post data</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"email"</span> <span class="o">=&gt;</span> <span class="s2">"user@acc.com"</span><span class="p">,</span> <span class="s2">"password"</span> <span class="o">=&gt;</span> <span class="s2">"123456"</span><span class="p">);</span>
<span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$cURL</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$$cURL</span><span class="p">);</span>

<span class="c1">// curl result:</span>
<span class="p">{</span>
  <span class="s2">"status"</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="s2">"message"</span><span class="o">:</span> <span class="s2">"success"</span><span class="p">,</span>
  <span class="s2">"result"</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"5a6032ae755b9e0585dc8f21"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Zone A"</span><span class="p">,</span>
      <span class="s2">"address"</span><span class="o">:</span> <span class="s2">"Lake Side"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"5a6032e0755b9e0585dc8f22"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Zone B"</span><span class="p">,</span>
      <span class="s2">"address"</span><span class="o">:</span> <span class="s2">"Forest Side"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"5a6067db755b9e547bfa52c4"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Zone C"</span><span class="p">,</span>
      <span class="s2">"address"</span><span class="o">:</span> <span class="s2">"Forest Side"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="c1">// parse json result</span>
<span class="nv">$json</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// '{"Cancelled":false,"MessageID":"402f481b-c420-481f-b129-7b2d8ce7cf0a","Queued":false,"SMSError":2,"SMSIncomingMessages":null,"Sent":false,"SentDateTime":"\/Date(-62135578800000-0500)\/"}'</span>

<span class="c1">// Array</span>
<span class="c1">// (</span>
<span class="c1">//     [Cancelled] =&gt; </span>
<span class="c1">//     [MessageID] =&gt; 402f481b-c420-481f-b129-7b2d8ce7cf0a</span>
<span class="c1">//     [Queued] =&gt; </span>
<span class="c1">//     [SMSError] =&gt; 2</span>
<span class="c1">//     [SMSIncomingMessages] =&gt; </span>
<span class="c1">//     [Sent] =&gt; </span>
<span class="c1">//     [SentDateTime] =&gt; /Date(-62135578800000-0500)/</span>
<span class="c1">// )</span>
</code></pre></div></div>

    </div>
</article>

    
    <footer class="footer">
        <section class="footer__about">
                <p class="footer__about__copyright">© minghu6</p>
        </section>
</footer>

    
    
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>

</body>
</html>